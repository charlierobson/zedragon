0100  .OPT NOLIST
0110 ;        FBOOTDY
0120 ;
0130 ;        NEW DISK WRITER TO READ
0140 ;        SLOW FORMAT DISKS AT
0150 ;        FAST FORMAT SPEED
0160 ;
0170 ;
0180 ; VARIABLES
0190 ;
0200 SECSIZ = 128
0210 ;
0220 ;******* THESE TWO VARIABLES
0230 ;        NEED TO BE CHANGED TO
0240 ;        START AND END ADDRESSES
0250 ;        RESPECTIVELY
0260 PST = $3000
0270 PND = $B8*SECSIZ+PST
0280 ;
0290 FLEN = PND-PST/SECSIZ
0300 ;
0310 DUNIT = $301
0320 DCOMND = $302
0330 DBUFLO = $304
0340 DBUFHI = $305
0350 DAUX1 = $30A
0360 DAUX2 = $30B
0370 ICCOM = $342
0380 ICBAL = $344
0390 ICBAH = $345
0400 ICBLL = $348
0410 ICBLH = $349
0420 ICAX1 = $34A
0430 ICAX2 = $34B
0440 DSKINV = $E453
0450 CIOV = $E456
0460 ;
0470 ;
0480 ;
0490 ;
0500 ;
0510 ;
0520  *= $9000
0530  LDA #0
0540  STA 14
0550 ;
0560 START LDX #1
0570  STX DUNIT
0580  DEX
0590  STX DAUX2
0600 ;
0610  LDX #FLEN
0620  LDA #'R
0630  STA DCOMND
0640 ;
0650  LDA #PND&255
0660  STA DBUFLO
0670  LDA #PND/256
0680  STA DBUFHI
0690 ;
0700 X1 LDA SECTBL,X
0710  STA DAUX1
0720 ;
0730  LDA DBUFLO
0740  SEC
0750  SBC #$80
0760  STA DBUFLO
0770  LDA DBUFHI
0780  SBC #0
0790  STA DBUFHI
0800 ;
0810  TXA
0820  PHA  ;SAVE X
0830  JSR DSKINV
0840  PLA  ;RETRIEVE X
0850  TAX
0860 ;
0870  DEX
0880  BNE X1
0890 ;
0900  LDA 14
0910  STA B1
0920  BRK
0930 ;
0940 B1 BRK
0950 ;
0960 ;
0970 ;
0980  .OPT NOLIST
0990 SECTBL .BYTE $FF
1000  .BYTE 4,18,15,12,9,6,17
1010  .BYTE 14,11,8,5,16,13,10,7
1020  .BYTE 22,19,36,33,30,27,24,21,35
1030  .BYTE 32,29,26,23,20,34,31,28,25
1040  .BYTE 40,37,54,51,48,45,42,39,53
1050  .BYTE 50,47,44,41,38,52,49,46,43
1060  .BYTE 58,55,72,69,66,63,60,57,71
1070  .BYTE 68,65,62,59,56,70,67,64,61
1080  .BYTE 76,73,90,87,84,81,78,75,89
1090  .BYTE 86,83,80,77,74,88,85,82,79
1100  .BYTE 94,91,108,105,102,99,96,93,107
1110  .BYTE 104,101,98,95,92,106,103,100,97
1120  .BYTE 112,109,126,123,120,117,114,111,125
1130  .BYTE 122,119,116,113,110,124,121,118,115
1140  .BYTE 130,127,144,141,138,135,132,129,143
1150  .BYTE 140,137,134,131,128,142,139,136,133
1160  .BYTE 148,145,162,159,156,153,150,147,161
1170  .BYTE 158,155,152,149,146,160,157,154,151
1180  .BYTE 166,163,180,177,174,171,168,165,179
1190  .BYTE 176,173,170,167,164,178,175,172,169
1200  .BYTE 184,181,198,195,192,189,186,183,197
1210  .BYTE 194,191,188,185,182,196,193,190,187
1220  .BYTE 202,199,216,213,210,207,204,201,215
1230  .BYTE 212,209,206,203,200,214,211,208,205
1240  .BYTE 220,217,234,231,228,225,222,219,233
1250  .BYTE 230,227,224,221,218,232,229,226,223
1260  .BYTE 238,235,252,249,246,243,240,237,251
1270  .BYTE 248,245,242,239,236,250,247,244,241
1280  .END
